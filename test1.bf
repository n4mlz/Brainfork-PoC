; 2 スレッドで同じセルを安全にインクリメント

[-]                     ; cell0 = 0 (共有カウンタ)
>[-]                    ; cell1 = 0 (出力用ワーク)
>[-]                    ; cell2 = 0 (出力用ワーク2)
< <                     ; 戻って cell0 へ

{                       ; 並列開始（2スレッド）
  (                     ; lock cell0
    +                   ; cell0++
    >                   ; dp=cell1
    ; PRINT 'A'
    +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.
    [-]                 ; cell1 をクリア
    <                   ; dp=cell0
  )                     ; unlock cell0
|
  (                     ; lock cell0
    +                   ; cell0++
    >>                  ; dp=cell2
    ; PRINT 'B'
    ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.
    [-]                 ; cell2 をクリア
    <<                  ; dp=cell0
  )                     ; unlock cell0
}
